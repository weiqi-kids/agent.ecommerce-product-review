# Problem Solver Mode 定義

## 核心定位

問題導向的解決指南，回答「這個問題怎麼解決？」而非「這產品好不好？」

## 差異化價值（Amazon 不做的事）

- **問題背景**：為什麼會有這個問題？
- **解決方案全景**：市場上有哪些解決方法？
- **負評分類**：功能失效 vs 產生新問題 vs 無關抱怨
- **跨產品痛點**：同類產品的共同問題
- **選購決策樹**：根據你的情況選哪個

---

## 觸發方式

1. 使用者提供一個熱門產品
2. 使用者描述一個問題
3. 「執行完整流程」自動觸發（對每個發現的熱門產品）

---

## 執行步驟

> 以下 Step 編號對應主流程 `CLAUDE.md` 的全局編號。

### Step 4: 產品分組（按具體問題）

分析輸入的產品，回答：
- 這產品解決什麼問題？
- 問題發生的原因是什麼？
- 有哪些解決方法？

將產品按具體問題分組（非族群導向）。

### Step 5: 問題研究 + 競品發現

```bash
# WebSearch 搜尋解決方法
WebSearch: "{解決方法} best products 2026"

# 從評測文章萃取競品名稱
# 取前 3-5 個競品（優先有 Amazon ASIN）
```

輸出：
- `docs/Extractor/research/{問題}--{date}.md`
- `docs/Extractor/competitors/{問題}--{date}.md`

### Step 6: 抓取評論 + 萃取

- 抓取原產品評論
- 抓取所有競品評論（有 Amazon ASIN）
- 執行 L1-L6 萃取

### Step 7: 比較分析

對每個產品的負評進行三分類：

| 類型 | 說明 | 符號 |
|------|------|------|
| 無法解決問題 | 核心功能失效 | ❌ |
| 產生新問題 | 副作用、延伸問題 | ⚠️ |
| 與產品無關 | 物流、賣家問題 | 📦 |

判斷：這產品相比競品，是否真的能解決問題？

### Step 8: 條件性產出報告

| 分析結果 | 產出 | 輸出路徑 |
|---------|------|----------|
| 能解決問題，且比競品好 | 推薦報告 | `docs/Narrator/recommendations/` |
| 能解決問題，但競品更好 | 比較報告 | `docs/Narrator/comparisons/` |
| 無法解決問題 | 警告報告 | `docs/Narrator/warnings/` |
| 全部產品都有嚴重問題 | 痛點報告 | `docs/Narrator/pain_points/` |
| **資料不足且補齊失敗** | 暫緩報告 | `docs/Narrator/deferred/` |

---

## 資料來源需求

| 資料類型 | 來源 | 工具 | 用途 |
|---------|------|------|------|
| 問題背景 | 網路搜尋 | WebSearch | 了解問題成因 |
| 解決方案 | 網路搜尋 | WebSearch | 列出所有方法 |
| 產品評論 | Amazon | Scraper | 分析產品表現 |
| 同類產品 | Amazon | Discovery | 找出競品 |
| 專業評測 | 網路搜尋 | WebSearch | 補充專業觀點 |

### 資料量標準

| 資料類型 | 最低要求 | 說明 |
|---------|---------|------|
| Amazon 評論 | **100 則** | 主角產品必須分析 100 則評論 |
| WebSearch 來源 | **100+ 筆** | 搜尋結果中實際閱讀/參考的來源數量 |
| 競品數量 | **3+ 個** | 至少 3 個同類競品 |

**WebSearch 執行策略**：
- 進行 **10-15 次**不同角度的搜尋查詢
- 每次搜尋閱讀 **10+ 個結果**
- 搜尋主題應涵蓋：
  - 問題背景與成因
  - 各種解決方法比較
  - 主角產品專業評測
  - 競品專業評測
  - 用戶社群討論
  - 官方支援文件
  - 常見問題與解決方案

> **必須同時使用 Amazon 資料和網路搜尋**，不可只有單一來源。
> 若某類搜尋確實無結果，須在報告中標註「搜尋無結果」。

---

## 輸出框架

> **SEO 自動處理**：VitePress 構建時自動生成 SEO 元素（JSON-LD、Open Graph、Sitemap），報告無需手動添加 SEO frontmatter。

```markdown
# {問題} 解決指南

## 問題是什麼？

{描述問題的症狀、困擾、影響}

---

## 為什麼會有這個問題？

{問題的根本原因，可能是生理、環境、習慣等}

---

## 解決方法有哪些？

| 方法類型 | 原理 | 代表產品 | 適合誰 |
|---------|------|----------|--------|
| {方法A} | {原理} | {產品1, 2} | {適用人群} |
| {方法B} | {原理} | {產品3, 4} | {適用人群} |
| {方法C} | {原理} | {產品5} | {適用人群} |

---

## 熱門產品分析：{產品名}

### 它如何解決問題？

{原理說明，為什麼這個方法有效}

### 負評深度分析

| 類型 | 佔比 | 說明 | 代表性評論 |
|------|------|------|-----------|
| ❌ 無法解決問題 | X% | 核心功能失效 | "..." |
| ⚠️ 產生新問題 | Y% | 副作用、延伸問題 | "..." |
| 📦 與產品無關 | Z% | 物流、賣家問題 | "..." |

### 這產品適合誰？

- ✅ {適合的情況}
- ❌ {不適合的情況}

---

## 競品比較

| 產品 | 解決方法類型 | 如何解決問題 | 價格 | 核心優勢 | 主要問題 |
|------|-------------|-------------|------|----------|----------|
| **{主角產品}** ✓ | {類型} | {原理說明} | ${價格} | {優勢} | {問題} |
| {競品A} | {類型} | {原理說明} | ${價格} | {優勢} | {問題} |
| {競品B} | {類型} | {原理說明} | ${價格} | {優勢} | {問題} |
| {競品C} | {類型} | {原理說明} | ${價格} | {優勢} | {問題} |

> **注意**：本報告主角用 **粗體 + ✓** 標註。「解決方法類型」讓讀者知道是同類方法還是不同方法，「如何解決問題」說明具體原理。

---

## 市場共同痛點

基於 {N} 個同類產品的負評分析：

| 共同痛點 | 出現率 | 有此問題的產品 | 可能原因 |
|---------|--------|---------------|---------|
| {痛點1} | 45% | A, B, C | {原因} |
| {痛點2} | 30% | A, D | {原因} |

---

## 選購決策樹

```
你最在意什麼？
├── 效果最好 → 選 {產品X}
├── 性價比高 → 選 {產品Y}
├── 敏感肌適用 → 選 {產品Z}
└── 預算有限 → 選 {產品W}
```

---

## 資料來源

| 類型 | 來源 | 連結 |
|------|------|------|
| Amazon 評論 ✓ | {主角產品} ({N} 則樣本) | [Amazon](https://www.amazon.com/dp/{ASIN}) |
| 專業評測 | {來源名稱} | [{標題}]({URL}) |
| 專業評測 | {來源名稱} | [{標題}]({URL}) |
| 社群討論 | {來源名稱} | [{標題}]({URL}) |
| 官方支援 | {來源名稱} | [{標題}]({URL}) |

> **注意**：所有來源必須有可點擊的連結。本報告主角用 **✓** 標註。

---
**免責聲明**：本報告基於公開評論資料的自動化分析產出，僅供參考。評論可能存在偏差、
虛假或不完整的情況。購買決策請結合個人需求與官方資訊綜合判斷。本報告不構成購買建議。
---
```

---

## 報告命名規則

| 報告類型 | 命名規則 |
|----------|----------|
| 推薦報告 | `{問題slug}--recommendation--{YYYY-MM-DD}.md` |
| 比較報告 | `{問題slug}--comparison--{YYYY-MM-DD}.md` |
| 警告報告 | `{product_id}--warning--{YYYY-MM-DD}.md` |
| 痛點報告 | `{問題slug}--pain-points--{YYYY-MM-DD}.md` |

---

## 自我審核 Checklist

報告產出後，必須逐項確認：

### 資料量
- [ ] Amazon 評論分析 ≥ 100 則
- [ ] WebSearch 來源 ≥ 100 筆（10-15 次搜尋 × 10+ 結果）
- [ ] 競品數量 ≥ 3 個

### 內容完整性
- [ ] 問題背景有網路來源支撐
- [ ] 至少列出 3 種解決方法
- [ ] 負評三分類完整（❌ 無法解決問題 / ⚠️ 產生新問題 / 📦 與產品無關）
- [ ] 包含選購決策樹

### 格式規範
- [ ] 競品比較表包含「解決方法類型」和「如何解決問題」欄位
- [ ] 競品比較表包含本報告主角（粗體 + ✓）
- [ ] 資料來源用表格格式，所有項目有可點擊連結
- [ ] 資料來源中本報告主角用 ✓ 標註
- [ ] 包含免責聲明
- [ ] 報告語言為繁體中文（引述保留原文）
- [ ] 推測與事實明確區分

**未通過審核** → 在報告開頭加上 `[REVIEW_NEEDED]` 並說明缺失項目。

> **SEO 說明**：VitePress 構建時自動從報告標題和內容生成 SEO 元素，無需手動添加 frontmatter。

---

## `[REVIEW_NEEDED]` 後續流程

當報告標記 `[REVIEW_NEEDED]` 時，系統會自動觸發補齊流程：

### Step 2 自動補齊

| 缺失類型 | 補齊動作 | 最大重試次數 |
|---------|---------|-------------|
| 研究資料不足 | 重新執行 WebSearch/WebFetch | 3 |
| 競品不足 | 從 WebSearch 萃取更多競品 | 3 |
| 評論不足 | 重新抓取評論 | 3 |

### 暫緩發佈

連續 **3 次補齊失敗**後：

1. 報告移至 `docs/Narrator/deferred/`
2. 報告開頭標記 `[DEFERRED]`
3. 加入 `watchlist.json` 的 `deferred_categories`
4. 每週一自動重試
5. 在每日摘要中顯示暫緩清單

**暫緩報告格式**：

```markdown
# {問題} 解決指南

[DEFERRED] 暫緩發佈
- **暫緩日期**：{YYYY-MM-DD}
- **原因**：{具體原因，如「研究資料不足，連續 3 次補齊失敗」}
- **需人工介入**：{需要人工執行的動作}
- **下次重試**：{YYYY-MM-DD}

---

{報告內容...}
```

### 重新發佈

補齊成功後：
1. 報告從 `deferred/` 移至對應目錄
2. 移除 `[DEFERRED]` 標記
3. 從 `watchlist.json` 的 `deferred_categories` 移除

---

## 禁止行為

1. 不可只有 Amazon 資料（必須有網路搜尋補充問題背景）
2. 不可缺少負評分析
3. 不可缺少競品比較
4. 不可產出無來源的聲明
5. 不可將評論分析結果當作客觀事實（須標明「基於評論的分析」）
6. 不可忽略評論可能的偽造或操縱風險（異常模式應標記）

---

## 參考範例

**已驗證的報告範本**：
- `docs/Narrator/recommendations/streaming-device--2026-02-04.md` — Roku Express 4K+ 串流裝置分析
  - 100 則 Amazon 評論（17 則負評，17%）
  - 17 個 WebSearch 資料來源
  - 完整的競品比較表格式
  - 完整的資料來源表格格式
