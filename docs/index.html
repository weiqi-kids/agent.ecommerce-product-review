<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>è²·å‰å¿…çœ‹</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="è²·å‰å¿…çœ‹ â€” æ™ºæ…§åˆ†æé›»å•†è©•è«–ï¼Œé¿é–‹åœ°é›·ç”¢å“">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/sidebar.min.css" />
  <style>
    :root {
      --theme-color: #3884ff;
    }
    .sidebar-nav > ul > li > a {
      font-weight: bold;
    }
    .markdown-section table {
      display: table;
      width: 100%;
    }
    .markdown-section blockquote {
      border-left: 4px solid #f66;
      background: #fff3f3;
      padding: 10px 15px;
    }
    .warning-critical { color: #d32f2f; font-weight: bold; }
    .warning-high { color: #f57c00; font-weight: bold; }

    /* ä¾§è¾¹æ è§†å›¾åˆ‡æ¢æŒ‰é’® */
    .sidebar-view-toggle {
      display: flex;
      justify-content: center;
      gap: 8px;
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      background: #f8f8f8;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .sidebar-view-toggle button {
      border: none;
      background: transparent;
      font-size: 20px;
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 6px;
      transition: all 0.2s;
      opacity: 0.5;
    }
    .sidebar-view-toggle button:hover {
      background: #e8e8e8;
      opacity: 0.8;
    }
    .sidebar-view-toggle button.active {
      background: var(--theme-color);
      opacity: 1;
    }
    .sidebar-view-toggle button[title]::after {
      content: attr(title);
      font-size: 10px;
      display: block;
      margin-top: 2px;
    }

    /* å´é‚Šæ¬„æ—¥æœŸæ¨™ç±¤ */
    .sidebar-nav li > a {
      display: flex !important;
      justify-content: space-between !important;
      align-items: center !important;
    }
    .sidebar-nav li > a .nav-title {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .sidebar-nav li > a .nav-date {
      font-size: 0.75em;
      color: #999;
      margin-left: 8px;
      flex-shrink: 0;
    }
  </style>
</head>
<body>
  <div id="app">Loading...</div>
  <script>
    // ä¾§è¾¹æ è§†å›¾é…ç½®
    const SIDEBAR_VIEWS = {
      timeline: { file: '_sidebar.md', icon: 'ğŸ“…', label: 'æ™‚é–“' },
      category: { file: '_sidebar-category.md', icon: 'ğŸ“', label: 'é¡åˆ¥' },
      type: { file: '_sidebar-type.md', icon: 'ğŸ“‹', label: 'é¡å‹' }
    };

    // è·å–ç”¨æˆ·åå¥½æˆ–é»˜è®¤å€¼
    function getSidebarView() {
      return localStorage.getItem('sidebarView') || 'timeline';
    }

    // ä¿å­˜ç”¨æˆ·åå¥½
    function setSidebarView(view) {
      localStorage.setItem('sidebarView', view);
    }

    // è·å–å½“å‰ä¾§è¾¹æ æ–‡ä»¶
    function getSidebarFile() {
      const view = getSidebarView();
      return SIDEBAR_VIEWS[view]?.file || '_sidebar.md';
    }

    window.$docsify = {
      name: 'è²·å‰å¿…çœ‹',
      repo: 'weiqi-kids/agent.ecommerce-product-review',
      loadSidebar: getSidebarFile(),
      alias: {
        '/.*/_sidebar.md': '/' + getSidebarFile(),
        '/.*/_sidebar-category.md': '/_sidebar-category.md',
        '/.*/_sidebar-type.md': '/_sidebar-type.md'
      },
      subMaxLevel: 3,
      sidebarDisplayLevel: 1,
      search: {
        placeholder: 'æœå°‹...',
        noData: 'æ‰¾ä¸åˆ°çµæœ',
        depth: 3
      },
      pagination: {
        previousText: 'ä¸Šä¸€é ',
        nextText: 'ä¸‹ä¸€é '
      },
      auto2top: true,
      coverpage: false,
      notFoundPage: true,
      plugins: [
        function(hook, vm) {
          // åœ¨ä¾§è¾¹æ æ¸²æŸ“åæ³¨å…¥åˆ‡æ¢æŒ‰é’®å’Œæ—¥æœŸæ¨™ç±¤
          hook.doneEach(function() {
            const sidebar = document.querySelector('.sidebar');
            if (!sidebar) return;

            // æ ¼å¼åŒ–å´é‚Šæ¬„é€£çµï¼šå°‡ã€Œæ¨™é¡Œ MM-DDã€åˆ†å‰²æˆå…©å€‹ span
            const links = sidebar.querySelectorAll('.sidebar-nav li > a');
            links.forEach(link => {
              // é¿å…é‡è¤‡è™•ç†
              if (link.querySelector('.nav-date')) return;

              const text = link.textContent.trim();
              // åŒ¹é…çµå°¾çš„æ—¥æœŸæ ¼å¼ YYYY-MM-DD
              const match = text.match(/^(.+?)\s+(\d{4}-\d{2}-\d{2})$/);
              if (match) {
                link.innerHTML = '<span class="nav-title">' + match[1] + '</span>' +
                                 '<span class="nav-date">' + match[2] + '</span>';
              }
            });

            // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨åˆ‡æ¢æŒ‰é’®
            if (document.querySelector('.sidebar-view-toggle')) return;

            // åˆ›å»ºåˆ‡æ¢æŒ‰é’®å®¹å™¨
            const toggleContainer = document.createElement('div');
            toggleContainer.className = 'sidebar-view-toggle';

            const currentView = getSidebarView();

            // åˆ›å»ºæŒ‰é’®
            Object.entries(SIDEBAR_VIEWS).forEach(([key, config]) => {
              const btn = document.createElement('button');
              btn.innerHTML = config.icon;
              btn.title = config.label;
              btn.dataset.view = key;
              if (key === currentView) btn.classList.add('active');

              btn.addEventListener('click', function() {
                const newView = this.dataset.view;
                setSidebarView(newView);
                // é‡æ–°åŠ è½½é¡µé¢ä»¥åº”ç”¨æ–°çš„ä¾§è¾¹æ 
                window.location.reload();
              });

              toggleContainer.appendChild(btn);
            });

            // æ’å…¥åˆ°ä¾§è¾¹æ å¼€å¤´
            sidebar.insertBefore(toggleContainer, sidebar.firstChild);
          });
        }
      ]
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-markdown.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
</body>
</html>
